# Matrix Application Service Registration File
# Copy this file to registration.yaml and customize it for your setup
# This file must be registered with your Matrix homeserver

# Unique identifier for this application service
id: googleplay_bridge

# URL where the application service is listening
# This should match your homeserver's perspective of where to reach the bridge
url: http://localhost:9000

# Application service token (must match config.yaml)
# Generate a secure random token and use the same value in both files
as_token: your_as_token_here

# Homeserver token (generate a separate secure random token)
# This is used by the homeserver to authenticate to the bridge
hs_token: your_hs_token_here

# Bot user that will be created/used by the bridge
sender_localpart: googleplaybot

# Namespaces that this bridge controls
namespaces:
  users:
    # Virtual users representing Google Play reviewers
    - exclusive: true
      regex: "@googleplay_.*"
    # The bot user
    - exclusive: true
      regex: "@googleplaybot"
  
  rooms:
    # Rooms that the bridge will manage (optional)
    # - exclusive: false
    #   regex: "#googleplay_.*"
  
  aliases:
    # Room aliases that the bridge will manage (optional)
    # - exclusive: false
    #   regex: "#googleplay_.*"

# Whether the bridge supports ephemeral events (typing, read receipts)
de.sorunome.msc2409.push_ephemeral: true

# Protocol information (optional)
protocols:
  - googleplay

# Rate limiting (optional)
rate_limited: false

# Instructions for generating tokens:
# 1. Generate two random tokens using a secure method:
#    - Linux/Mac: openssl rand -hex 32
#    - Python: python -c "import secrets; print(secrets.token_hex(32))"
#    - Online: https://www.random.org/strings/ (64 chars, hex)
# 
# 2. Use one token for 'as_token' (must match config.yaml appservice.token)
# 3. Use another token for 'hs_token'
#
# 4. Register this file with your Matrix homeserver by adding it to the
#    app_service_config_files list in homeserver.yaml, then restart Synapse:
#    
#    app_service_config_files:
#      - /path/to/registration.yaml
#
# 5. Make sure the URL is accessible from your Matrix homeserver to the bridge